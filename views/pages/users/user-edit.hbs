<div class="profile-edit-container">
  {{#if user}}
  <h1 class="profile-edit-title">Редактирование профиля</h1>

  <form class="profile-edit-form" action="/api/users/{{user.id}}?_method=PATCH" method="POST" enctype="multipart/form-data">
    <div class="form-field">
      <label for="username" class="form-label">Юзернейм:</label>
      <input type="text" id="username" name="name" value="{{user.name}}" class="form-input" required minlength="3"
        pattern="[A-Za-z0-9]+">
    </div>

    <div class="form-field">
      <label for="email" class="form-label">Электронная почта:</label>
      <input type="email" id="email" name="email" value="{{user.email}}" class="form-input" required>
    </div>

    <div class="form-field">
      <label for="avatar" class="form-label">Аватарка:</label>
      {{#if user.avatar_url}}
      <div class="current-avatar">
        <img src="{{user.avatar_url}}" alt="Текущая аватарка" class="avatar-preview">
      </div>
      {{/if}}
      <input type="file" id="avatar" name="avatar" accept="image/*" class="form-input-file">
      <small class="form-hint">Допустимые форматы: JPG, PNG, GIF (макс. 5MB)</small>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn-submit">Сохранить изменения</button>
      <a href="/profile" class="btn-cancel">Назад в профиль</a>
    </div>
  </form>
  {{else}}
  <div class="auth-alert">
    <p>Вы не авторизованы</p>
    <a href="/login" class="login-link">Войдите в систему</a>
  </div>
  {{/if}}
</div>